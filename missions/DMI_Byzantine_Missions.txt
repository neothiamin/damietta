####################
# by neothiamin
####################

#######
#Slot 1
#######
dmi_byz_missions_1a = {
	slot = 1
	generic = no #yes for generic missions
	ai = yes #because why would it be no
	potential = {
		tag = BYZ
	}
	
	has_country_shield = yes #no if generic

	dmi_byz_men_of_cloth = {
		icon = mission_hands_praying
		position = 1
		required_missions = {
			
		}
		provinces_to_highlight = {
			if = {
				limit = {
					NOT = {
						BYZ = {
							silk = 3
						}
					}
				}
				trade_goods = silk
			}
			if = {
				limit = {
					NOT = {
						BYZ = {
							cloth = 7
						}
					}
				}
				trade_goods = cloth
			}
		}
		trigger = {
			if = {
				limit = {
					has_estate = estate_church
				}
				estate_influence = {
					estate = estate_church
					influence = 75
				}
				estate_loyalty = {
					estate = estate_church
					loyalty = 75
				}
			}
			OR = {
				cloth = 7
				silk = 3
			}
		}
		effect = {
			add_years_of_income = 1
			148 = {
				change_trade_goods = silk
			}
		}
	}

	dmi_byz_tyrian_purple = {
		icon = mission_early_game_buildings
		position = 2
		required_missions = {
			dmi_byz_men_of_cloth
		}
		provinces_to_highlight = {
			trade_goods = dyes
		}
		trigger = {
			OR = {
				dyes = 3
				custom_trigger_tooltip = {
					tooltip = dmi_byz_have_dye_prov_with_10_prod.tt
					any_owned_province = {
						trade_goods = dyes
						base_production = 10
					}
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = damietta_byz_tyrian_purple
				duration = 7300
			}
		}
	}
}

dmi_byz_missions_1b = {
	slot = 1
	generic = no #yes for generic missions
	ai = yes #because why would it be no
	potential = {
		tag = BYZ
	}
	
	has_country_shield = yes #no if generic

	dmi_byz_noble_rights = {
		icon = mission_noble_council
		position = 3
		required_missions = {
			
		}
		trigger = {
			if = {
				limit = {
					has_dlc = "Dharma"
				}
				custom_trigger_tooltip = {
					tooltip = dmi_byz_has_t2_reform
					OR = {
						has_reform = damietta_byz_reform_pronoia
						has_reform = damietta_byz_reform_themata
					}
				}
			}
			else = {
				NOT = {
					estate_territory = {
						estate = estate_nobles
						territory = 10
					}
				}
			}
		}
		effect = {
			add_prestige = 5
			add_estate_loyalty_modifier = {
				estate = estate_nobles
				desc = BYZ_NOBLE_RIGHTS_GUARANTEED
				loyalty = 10
				duration = 5475
			}
			add_yearly_manpower = 2.5
		}
	}

	dmi_byz_bureaucratic_reform = {
		icon = mission_pf_map_table
		position = 4
		required_missions = {
			dmi_byz_noble_rights
		}
		trigger = {
			if = {
				limit = {
					has_dlc = "Dharma"
				}
				custom_trigger_tooltip = {
					tooltip = dmi_byz_has_t3_reform
					OR = {
						has_reform = damietta_byz_reform_keep_bureaucracy
						has_reform = damietta_byz_reform_cut_bureaucracy
						has_reform = damietta_byz_reform_diverse_bureaucracy
					}
				}
			}
			else = {
				stability = 3
			}
		}
		effect = {
			add_stability_or_adm_power = yes
		}
	}
}

dmi_byz_missions_1c = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		tag = BYZ
	}
	
	has_country_shield = yes #no if generic

	dmi_byz_epirus = {
		icon = mission_invade_island
		position = 5
		required_missions = {
		}
		provinces_to_highlight = {
			dmi_byz_epirus_provinces = yes
		}
		trigger = {
			custom_trigger_tooltip = {
				tooltip = dmi_highlighted_provs_own
				all_province = {
					dmi_byz_epirus_provinces = yes
					owned_by = ROOT
				}
			}
		}
		effect = {
			add_prestige = 5
			every_province = {
				limit = {
					OR = {
						area = aetolia_area
						area = northern_epirus_area #Ionian Islands
						area = northern_greece_area #Epirus
					}
					owned_by = VEN
				}
				add_permanent_claim = ROOT
			}
			144 = {
				add_base_production = 1
				change_trade_goods = cloth
			}
		}
	}

	dmi_byz_integrate_hellas = {
		icon = mission_unite_home_region
		position = 6
		required_missions = {
			dmi_byz_epirus
		}
		provinces_to_highlight = {
			dmi_byz_hellas_provinces = yes
		}
		trigger = {
			custom_trigger_tooltip = {
				tooltip = dmi_highlighted_provs_own
				all_province = {
					dmi_byz_hellas_provinces = yes
					owned_by = ROOT
				}
			}
		}
		effect = {
			every_province = {
				limit = {					
					OR = {
						area = morea_area
						area = hellas_area
					}
					country_or_non_sovereign_subject_holds = VEN
				}
				add_permanent_claim = ROOT
			}
		}
	}
}

#######
#Slot 2
#######
dmi_byz_missions_2a = {
	slot = 2
	generic = no #yes for generic missions
	ai = yes #because why would it be no
	potential = {
		tag = BYZ
	}
	
	has_country_shield = yes #no if generic

	dmi_byz_at_the_acropolis = {
		position = 2
		icon = mission_european_church
		required_missions = {
			dmi_byz_men_of_cloth
		}
		provinces_to_highlight = {
			province_id = 146
		}
		trigger = {
			146 = {
				owned_by = ROOT
				OR = {
					has_building = temple
					has_building = cathedral
				}
				development = 25
			}
		}
		effect = {
			add_prestige = 5
			146 = {
				add_province_modifier = {
					name = dmi_byz_acropolis_again
					duration = 9125
				}
			}
		}
	}
}

dmi_byz_missions_2b = {
	slot = 2
	generic = no #yes for generic missions
	ai = yes #because why would it be no
	potential = {
		tag = BYZ
	}
	
	has_country_shield = yes #no if generic

	dmi_byz_bulgarian_menace = {
		position = 4
		icon = mission_conquer_5_states
		required_missions = {
			
		}
		provinces_to_highlight = {
			dmi_byz_bulgaria_provinces = yes
		}
		trigger = {
			custom_trigger_tooltip = {
				tooltip = dmi_highlighted_provs_own_or_vassal
				all_province = {
					dmi_byz_bulgaria_provinces = yes
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
		}
		effect = {
			add_prestige = 5
			albania_area = {
				add_permanent_claim = ROOT
			}
		}
	}

	dmi_byz_albania = {
		position = 6
		icon = mission_conquer_50_development
		required_missions = {
			dmi_byz_bulgarian_menace
		}
		provinces_to_highlight = {
			dmi_byz_albania_provinces = yes
		}
		trigger = {
			custom_trigger_tooltip = {
				tooltip = dmi_highlighted_provs_own_or_vassal
				all_province = {
					dmi_byz_albania_provinces = yes
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
		}
		effect = {
			every_province = {
				limit = {
					area = albania_area
					owned_by = VEN
				}
				add_permanent_claim = ROOT
			}
		}
	}

	dmi_byz_venetian_vultures = {
		position = 7
		icon = mission_invade_island
		required_missions = {
			dmi_byz_albania
			dmi_byz_integrate_hellas
		}
		provinces_to_highlight = {
			dmi_byz_venetian_vultures_provinces = yes
			country_or_non_sovereign_subject_holds = VEN
		}
		trigger = {
			custom_trigger_tooltip = {
				tooltip = none_of_the_highlighted_provinces_owned_by_ven_or_subject
				all_province = {
					dmi_byz_venetian_vultures_provinces = yes
					NOT = {						
						country_or_non_sovereign_subject_holds = VEN
					}
				}
			}
		}
		effect = {
			add_prestige = 25
			apulia_area = {
				add_permanent_claim = ROOT
			}
		}
	}
	
	dmi_byz_across_the_strait = {
		position = 8
		icon = mission_invade_island
		required_missions = {
			dmi_byz_venetian_vultures
		}
		provinces_to_highlight = {
			area = apulia_area
		}
		trigger = {
			custom_trigger_tooltip = {
				tooltip = dmi_highlighted_provs_own
				apulia_area = {
					type = all
					owned_by = ROOT
				}
			}
		}
		effect = {
			add_prestige = 25
			calabria_area = {
				add_permanent_claim = ROOT
			}
			sicily_area = {
				add_permanent_claim = ROOT
			}
			naples_area = {
				add_permanent_claim = ROOT
			}
			abruzzo_area = {
				add_permanent_claim = ROOT
			}
		}
	}
}